<html>
<<<<<<< HEAD
=======
    <head>
        <meta charset="utf-8">
        <title>Vue - listagem, inserção e edição de Jogadores</title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    </head> 
    <body>         
        <div id="app" class="container">     
                <!-- Exercicios
                    1 - Incluir um campo para observacoes. textarea - 0 a 20 caracteres
                    2-  Incluir um campo para informar o percentual de vida 0 a 100. input range.
                        (percentual permitido: 15 a 100).
                        (incluir tb na listagem).
                    3 - Validação Data de nascimento: permitir apenas datas de nascimento inferiores a data atual. 
                    4 - Implementar validação de todos os campos com a geração de mensagens específicas.    
                -->          
                <h2>Listagem de Jogadores do CS</h2>   
>>>>>>> 78afa847ed7c415403385f58f74bfbf0b42919b8

<head>
    <meta charset="utf-8">
    <title>Vue - listagem, inserção e edição de Jogadores</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
</head>

<body>
    <div id="app" class="container">
        <h2>Listagem de Jogadores do CS</h2>

<<<<<<< HEAD
        <table class="table table-striped">
            <tr>
                <th scope="col">#</th>
                <th scope="col">NickName</th>
                <th scope="col">Data Nascimento</th>
                <th scope="col">Quantidade de Estrelas</th>
                <th scope="col">Vida</th>
                <th scope="col">Status</th>
                <th scope="col">Alterar</th>
                <th scope="col">Remover</th>
            </tr>
            <tbody>
                <tr v-for="(j, indice) in jogadores">
                    <td>{{indice}}</td>
                    <td>{{j.nickname}}</td>
                    <td>{{j.data_nascimento}}</td>
                    <td>{{j.qtd_estrela}}</td>
                    <td>{{j.vida}}</td>
                    <td v-if="j.status"><input type="checkbox" checked disabled></td>
                    <td v-if="!j.status"><input type="checkbox" disabled></td>
                    <td><button v-on:click="editJogador(indice)" class="btn" type="button">Alterar</button></td>
                    <td><button v-on:click="remJogador(indice)" class="btn" type="button">Remover</button></td>
                </tr>
            </tbody>
        </table>
        <!--Exercicios
        1 - Incluir um campo para observações. textarea - 0 a 20 caracteres
        2 - Incluir um campo para informar o percentual de vida 0 a 100. input range(percentual permitido 15 a 100) (incluir na listagem)
        3 - Validação Data de nascimento: permitir aoenas datas de nascimento inferiores a data atual
    -->
        <form id="formulario">
            <h3>Formulário para cadastrar novo jogador</h3>
            <div class="form-group">
                <label for="inputIndice">#:</label>
                <input type="text" v-model="novo_jogador.indice" class="form-control" id="inputIndice" disabled>
            </div>
            <div class="form-group">
                <label for="inputNickname">Nickname:</label>
                <input type="text" v-model="novo_jogador.nickname" class="form-control" id="inputNickname">
            </div>
            <div class="form-group">
                <label for="inputDtNasc">D. Nascimento:</label>
                <input type="date" v-model="novo_jogador.data_nascimento" max="Date()" class="form-control"
                    id="inputDtNasc"><!--Atividade - Aplicar um input/calendario mais apropriado. -->
            </div>
            <div class="form-group">
                <label for="inputQtdEstrela">Quantidade de Estrelas:</label>
                <input type="number" v-model="novo_jogador.qtd_estrela" class="form-control" id="inputQtdEstrela">
            </div>
            <div class="form-group">
                <label for="checkStatus">Status:</label>
                <input type="checkbox" v-model="novo_jogador.status"
                    id="checkStatus"><!--Atividade - Aplicar um input mais apropriado. -->
            </div>
            <div class="form-group">
                <label for="inputVida">Percentual de vida:</label>
                <input type="range" v-model="novo_jogador.vida" min="15" max="100" oninput="display.value=value"
                    onchange="display.value=value" name="inputVida" id="inputVida">
                <input type="text" disabled oninput="inputVida.value=value" onchange="inputVida.value=value"
                    id="display"></input>
            </div>
            <div class="form-group">
                <label for="inputSenha">Senha:</label>
                <input type="password" v-model="novo_jogador.senha" class="form-control"
                    id="inputSenha"><!--Atividade - Aplicar um input mais apropriado. -->
            </div>
            <div class="form-group">
                <label for="inputObservacao">Observações:</label>
                <textarea v-model="novo_jogador.observacao" maxlength="20" rows="5" class="form-control"
                    id="inputObservacao"></textarea>
            </div>
=======
        </div>       
    </body>
    <script type="text/javascript">
        $(document).ready(function() {
            var dados = { 
                jogadores:  [ {nickname: 'joaozinho', data_nascimento: '', qtd_estrela: 5, status: false, senha: '1234'} 
                            ], 
                            
                novo_jogador: {indice: '', nickname: '', data_nascimento: '', qtd_estrela: '', status: false, senha: ''}
            };
        
          new Vue({ 
                el: '#app', 
                data: dados,
                methods: { 
>>>>>>> 78afa847ed7c415403385f58f74bfbf0b42919b8

            <button @click="addJogador" class="btn btn-primary" type="button">Salvar</button>
            <button @click="cleanFormulario" class="btn btn-primary" type="button">Limpar</button>

    </div>
    </form>

    </div>
</body>
<script type="text/javascript">
    $(document).ready(function () {
        var dados = {
            jogadores: [{ nickname: 'joaozinho', data_nascimento: '', qtd_estrela: 5, vida: '20', status: false, senha: '1234', observacao: 'nada' }
            ],

            novo_jogador: { indice: '', nickname: '', data_nascimento: '', qtd_estrela: '', vida: '', status: false, senha: '', observacao: '' }
        };

        new Vue({
            el: '#app',
            data: dados,
            methods: {

                addJogador: function () {
                    var input_indice = this.novo_jogador.indice;
                    var input_nickname = this.novo_jogador.nickname.trim();
                    var input_data_nascimento = this.novo_jogador.data_nascimento.trim();
                    var input_qtd_estrela = this.novo_jogador.qtd_estrela;
                    var input_vida = this.novo_jogador.vida;
                    var input_status = this.novo_jogador.status;
                    var input_senha = this.novo_jogador.senha.trim();
                    var input_observacao = this.novo_jogador.observacao.trim();

                    //Atividade - testar o tamanho do nickname e senha. 
                    //Não permitir tamanhos menores do que 4 para ambos.
                    if(!input_data_nascimento.value){
                        alert('data de nascimento inválida');
                        return
                    }else{
                    var dataAtual = new Date();
                    var dNascimento = new Date(input_data_nascimento);
                    if (dNascimento > dataAtual) {
                        alert("Data de nascimento inválida");
                        return
                    }}
                    
                    if (input_nickname.length > 3 && input_qtd_estrela > -1 && input_senha.length > 3) {
                        
                        //documentação sobre o parseInt
                        //https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/parseInt
                        if (isNaN(parseInt(input_indice))) {
                            
                            this.jogadores.push({
                                nickname: input_nickname,
                                data_nascimento: input_data_nascimento,
                                qtd_estrela: input_qtd_estrela,
                                vida: input_vida,
                                status: input_status,
                                senha: input_senha,
                                observacao: input_observacao
                            }
                            );
                            alert('Novo Jogador cadastrado !');
                            
                        } else {
                            
                            this.jogadores[input_indice] = {
                                nickname: input_nickname,
                                data_nascimento: input_data_nascimento,
                                qtd_estrela: input_qtd_estrela,
                                vida: input_vida,
                                status: input_status,
                                senha: input_senha,
                                observacao: input_observacao
                            };

                            alert('Jogador alterado !');
                            console.log(input_data_nascimento.value)
                        }
                        this.cleanFormulario();

                    } else {
                        if (input_nickname.length < 3) {
                            alert("Nickname inválido");
                        } else if (input_qtd_estrela < -1) {
                            alert("Quantidade de estrelas inválida");
                        } else if (input_senha.length < 3) {
                            alert("Senha inválida");
                        }
                    }
                },

                editJogador: function (param_index) {

                    this.novo_jogador.indice = param_index;
                    this.novo_jogador.nickname = this.jogadores[param_index].nickname;
                    this.novo_jogador.data_nascimento = this.jogadores[param_index].data_nascimento;
                    this.novo_jogador.qtd_estrela = this.jogadores[param_index].qtd_estrela;
                    this.novo_jogador.vida = this.jogadores[param_index].vida;
                    this.novo_jogador.status = this.jogadores[param_index].status;
                    this.novo_jogador.senha = this.jogadores[param_index].senha;
                    this.novo_jogador.observacao = this.jogadores[param_index].observacao;
                },

                remJogador: function (param_index) {

                    // Atividade - Confirmar antes de remover
                    if (window.confirm("Você realmente deseja remover?")) {

                        //documentacao sobre o splice
                        //https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/splice
                        //remove 1 elemento do índice definido pela variavel param_index
                        this.jogadores.splice(param_index, 1);
                        alert('Removeu o jogador: ' + param_index);
                    }


                },

                cleanFormulario: function () {

                    this.novo_jogador.indice = '';
                    this.novo_jogador.nickname = '';
                    this.novo_jogador.data_nascimento = '';
                    this.novo_jogador.qtd_estrela = 0;
                    this.novo_jogador.vida = '15';
                    this.novo_jogador.status = false;
                    this.novo_jogador.senha = '';
                    this.novo_jogador.observacao = '';
                }

            }
        });
    });

</script>

</html>